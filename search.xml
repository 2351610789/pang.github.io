<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Vue2-æ•°ç»„æ–¹æ³•å“åº”å¼å°è£…-æºç åˆ†æ</title>
      <link href="/2024/12/28/Vue-%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B0%81%E8%A3%85-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
      <url>/2024/12/28/Vue-%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B0%81%E8%A3%85-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆå¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œå°è£…ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œå°è£…ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œå°è£…ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œå°è£…ï¼Ÿ</h1><p>åœ¨vueä¸­ï¼Œå¯¹å“åº”å¼å¤„ç†çš„æ˜¯Object.definePropertyå¯¹æ•°æ®è¿›è¡Œæ‹¦æˆªï¼Œè€Œè¿™ä¸ªæ–¹æ³•å¹¶ä¸èƒ½ç›‘å¬åˆ°æ•°ç»„å†…éƒ¨å˜åŒ–ï¼Œæ•°ç»„é•¿åº¦å˜åŒ–ï¼Œæ•°ç»„æˆªå–å˜åŒ–ç­‰ï¼Œæ‰€ä»¥éœ€è¦å¯¹è¿™äº›æ“ä½œè¿›è¡Œhackï¼Œè®©Vueèƒ½ç›‘å¬åˆ°å…¶ä¸­å˜åŒ–Vueè¢«ç›‘å¬çš„æ•°ç»„çš„å˜æ›´æ–¹æ³•è¿›è¡Œäº†åŒ…è£¹ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿå°†ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚</p><h1 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h1><h2 id="æ ¸å¿ƒæ€æƒ³"><a href="#æ ¸å¿ƒæ€æƒ³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³"></a>æ ¸å¿ƒæ€æƒ³</h2><p><strong>1.é‡å†™æ•°ç»„çš„å˜å¼‚æ–¹æ³•</strong><br>Vue é‡å†™äº†æ•°ç»„çš„å˜å¼‚æ–¹æ³•ï¼ˆä¾‹å¦‚ pushã€popã€shiftã€unshiftã€spliceã€sort å’Œ reverseï¼‰ï¼Œåœ¨è¿™äº›æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œä¼šè§¦å‘é€šçŸ¥æœºåˆ¶ï¼Œå‘ŠçŸ¥ Vue æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚</p><p><strong>2.ä½¿ç”¨protoæˆ–è€…prototype</strong><br>Vue å°†æ•°ç»„çš„åŸå‹æŒ‡å‘äº†ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†é‡å†™åçš„æ•°ç»„å˜å¼‚æ–¹æ³•ï¼Œè¿™æ ·å°±èƒ½å¤Ÿç¡®ä¿å½“è°ƒç”¨è¿™äº›æ–¹æ³•æ—¶ï¼Œèƒ½å¤Ÿè§¦å‘æ•°æ®æ›´æ–°ã€‚</p><h2 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h2><p>1.é¦–å…ˆæ‹¿åˆ°æ•°ç»„çš„åŸå‹å¯¹è±¡Array.prototypeå¹¶ç¼“å­˜ï¼Œä½¿ç”¨Object.createæ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡objï¼Œä½¿å¾—è¯¥å¯¹è±¡çš„åŸå‹æ˜¯Array.prototypeã€‚</p><p>2.ä½¿ç”¨defå‡½æ•°ä¸ºobjé‡å†™åŸç”Ÿæ•°ç»„æ–¹æ³•ã€‚å…·ä½“æ¥è¯´ï¼Œé¦–å…ˆè°ƒç”¨åŸç”Ÿæ•°ç»„æ–¹æ³•ï¼Œæ‹¿åˆ°ç»“æœï¼Œç„¶ååˆ¤æ–­æ˜¯å¦è§¦å‘è§†å›¾æ›´æ–°ï¼Œè‹¥è§¦å‘ï¼Œåˆ™è·å–Observerå¯¹è±¡obï¼Œè°ƒç”¨ob.observeArray()è®¾ç½®å“åº”å¼ç›‘å¬ï¼Œç„¶åè°ƒç”¨ob.dep.notify()æ›´æ–°è§†å›¾ï¼Œå¹¶è¿”å›ç»“æœã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¼“å­˜æ•°ç»„åŸå‹</span></span><br><span class="line"><span class="keyword">const</span> arrayProto = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>;</span><br><span class="line"><span class="comment">// å®ç° arrayMethods.__proto__ === Array.prototype</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> arrayMethods = <span class="title class_">Object</span>.<span class="title function_">create</span>(arrayProto);</span><br><span class="line"><span class="comment">// éœ€è¦è¿›è¡ŒåŠŸèƒ½æ‹“å±•çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> methodsToPatch = [<span class="string">&quot;push&quot;</span>,<span class="string">&quot;pop&quot;</span>,<span class="string">&quot;shift&quot;</span>,<span class="string">&quot;unshift&quot;</span>,<span class="string">&quot;splice&quot;</span>,<span class="string">&quot;sort&quot;</span>,<span class="string">&quot;reverse&quot;</span>];</span><br><span class="line"></span><br><span class="line">methodsToPatch.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">method</span>) &#123;</span><br><span class="line">  <span class="comment">// ç¼“å­˜åŸç”Ÿæ•°ç»„æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">const</span> original = arrayProto[method];</span><br><span class="line">  <span class="title function_">def</span>(arrayMethods, method, <span class="keyword">function</span> <span class="title function_">mutator</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="comment">// æ‰§è¡Œå¹¶ç¼“å­˜åŸç”Ÿæ•°ç»„åŠŸèƒ½</span></span><br><span class="line">    <span class="keyword">const</span> result = original.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    <span class="comment">// å“åº”å¼å¤„ç†</span></span><br><span class="line">    <span class="keyword">const</span> ob = <span class="variable language_">this</span>.<span class="property">__ob__</span>;</span><br><span class="line">    <span class="keyword">let</span> inserted;</span><br><span class="line">    <span class="keyword">switch</span> (method) &#123;</span><br><span class="line">    <span class="comment">// pushã€unshiftä¼šæ–°å¢ç´¢å¼•ï¼Œæ‰€ä»¥è¦æ‰‹åŠ¨observer</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;push&quot;</span>:</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;unshift&quot;</span>:</span><br><span class="line">        inserted = args;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="comment">// spliceæ–¹æ³•ï¼Œå¦‚æœä¼ å…¥äº†ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œä¹Ÿä¼šæœ‰ç´¢å¼•åŠ å…¥ï¼Œä¹Ÿè¦æ‰‹åŠ¨observerã€‚</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&quot;splice&quot;</span>:</span><br><span class="line">        inserted = args.<span class="title function_">slice</span>(<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">    <span class="keyword">if</span> (inserted) ob.<span class="title function_">observeArray</span>(inserted);<span class="comment">// è·å–æ’å…¥çš„å€¼ï¼Œå¹¶è®¾ç½®å“åº”å¼ç›‘å¬</span></span><br><span class="line">    <span class="comment">// notify change</span></span><br><span class="line">    ob.<span class="property">dep</span>.<span class="title function_">notify</span>();<span class="comment">// é€šçŸ¥ä¾èµ–æ›´æ–°</span></span><br><span class="line">    <span class="comment">// è¿”å›åŸç”Ÿæ•°ç»„æ–¹æ³•çš„æ‰§è¡Œç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="è§£è¯»"><a href="#è§£è¯»" class="headerlink" title="è§£è¯»"></a><strong>è§£è¯»</strong></h2><p><strong>1.ç¼“å­˜åŸç”Ÿæ•°ç»„æ–¹æ³•</strong></p><p>é¦–å…ˆï¼Œä»£ç é€šè¿‡ const arrayProto &#x3D; Array.prototype ç¼“å­˜äº†åŸç”Ÿçš„æ•°ç»„æ–¹æ³•ï¼Œä»¥å¤‡åç»­ä½¿ç”¨ã€‚</p><p><strong>2.åˆ›å»ºæ‰©å±•åçš„æ•°ç»„å¯¹è±¡</strong></p><p>ç„¶åï¼Œé€šè¿‡ Object.create(arrayProto) åˆ›å»ºäº†ä¸€ä¸ªåä¸º arrayMethods çš„å¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šæ·»åŠ æ–°çš„æ–¹æ³•æˆ–è€…é‡å†™åŸæœ‰çš„æ–¹æ³•ï¼Œè€Œä¸å½±å“åŸç”Ÿçš„ Array.prototypeã€‚</p><p><strong>3.éå†éœ€è¦æ‹“å±•çš„æ–¹æ³•</strong></p><p>æ¥ä¸‹æ¥ï¼Œä»£ç éå†äº†éœ€è¦æ‹“å±•çš„æ•°ç»„æ–¹æ³•ï¼Œå¯¹æ¯ä¸ªæ–¹æ³•è¿›è¡Œæ‹“å±•ã€‚è¿™äº›æ–¹æ³•åŒ…æ‹¬ pushã€popã€shiftã€unshiftã€spliceã€sort å’Œ reverseã€‚</p><p><strong>4.æ‹“å±•æ–¹æ³•çš„å®ç°</strong></p><p>å¯¹äºæ¯ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨ def å‡½æ•°å°†åŸç”Ÿæ–¹æ³•æ›¿æ¢ä¸ºæ–°çš„æ–¹æ³•ã€‚æ–°æ–¹æ³•åœ¨æ‰§è¡ŒåŸç”Ÿæ–¹æ³•åï¼Œè¿›è¡Œå“åº”å¼å¤„ç†å¹¶é€šçŸ¥ä¾èµ–æ›´æ–°ã€‚å…·ä½“çš„å“åº”å¼å¤„ç†åŒ…æ‹¬ï¼š</p><ul><li>è·å–æ“ä½œçš„æ•°æ®å¯¹è±¡çš„ Observer å®ä¾‹ï¼ˆobï¼‰ã€‚</li><li>æ ¹æ®æ“ä½œç±»å‹ï¼Œè·å–éœ€è¦è®¾ç½®å“åº”å¼ç›‘å¬çš„å€¼ã€‚</li><li>å¦‚æœæœ‰éœ€è¦è®¾ç½®å“åº”å¼ç›‘å¬çš„å€¼ï¼Œè°ƒç”¨ Observer å®ä¾‹çš„ observeArray æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</li><li>æœ€åï¼Œé€šè¿‡ ob.dep.notify() é€šçŸ¥ä¾èµ–æ›´æ–°ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2-KeepAlive-æºç åˆ†æ</title>
      <link href="/2024/12/27/Vue2-Keep-Alive%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2024/12/27/Vue2-Keep-Alive%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="Keep-aliveæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Keep-aliveæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Keep-aliveæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Keep-aliveæ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>keep-aliveæ˜¯vueä¸­çš„å†…ç½®ç»„ä»¶ï¼Œèƒ½åœ¨ç»„ä»¶åˆ‡æ¢è¿‡ç¨‹ä¸­å°†çŠ¶æ€ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œé˜²æ­¢é‡å¤æ¸²æŸ“DOMã€‚keep-alive åŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè€Œä¸æ˜¯é”€æ¯å®ƒä»¬</p><p>keep-aliveå¯ä»¥è®¾ç½®ä»¥ä¸‹propså±æ€§ï¼š</p><ul><li><p>include - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚åªæœ‰åç§°åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜</p></li><li><p>exclude - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚ä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜</p></li><li><p>max - æ•°å­—ã€‚æœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">include</span>=<span class="string">&quot;a,b&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ­£åˆ™è¡¨è¾¾å¼ (ä½¿ç”¨ `v-bind`) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">:include</span>=<span class="string">&quot;/a|b/&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ•°ç»„ (ä½¿ç”¨ `v-bind`) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">:include</span>=<span class="string">&quot;[&#x27;a&#x27;, &#x27;b&#x27;]&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;view&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åŒ¹é…é¦–å…ˆæ£€æŸ¥ç»„ä»¶è‡ªèº«çš„ name é€‰é¡¹ï¼Œå¦‚æœnameé€‰é¡¹ä¸å¯ç”¨ï¼Œåˆ™åŒ¹é…å®ƒçš„å±€éƒ¨æ³¨å†Œåç§° (çˆ¶ç»„ä»¶components é€‰é¡¹çš„é”®å€¼)ï¼ŒåŒ¿åç»„ä»¶ä¸èƒ½è¢«åŒ¹é…ã€‚</p><p>è®¾ç½®äº†keep-aliveç¼“å­˜çš„ç»„ä»¶ï¼Œä¼šå¤šå‡ºä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆactivatedä¸deactivatedï¼‰ï¼š</p><ul><li><p>é¦–æ¬¡è¿›å…¥ç»„ä»¶æ—¶ï¼šbeforeRouteEnter &gt; beforeCreate &gt; created &gt; mounted &gt; activated &gt; â€¦ â€¦ &gt; beforeRouteLeave &gt; deactivated</p></li><li><p>å†æ¬¡è¿›å…¥ç»„ä»¶æ—¶ï¼šbeforeRouteEnter &gt; activated &gt; â€¦ â€¦ &gt; beforeRouteLeave &gt; deactivated</p></li></ul><h1 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h1><p>ä½¿ç”¨åŸåˆ™ï¼šå½“æˆ‘ä»¬åœ¨æŸäº›åœºæ™¯ä¸‹ä¸éœ€è¦è®©é¡µé¢é‡æ–°åŠ è½½æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨keepalive</p><p>ä¸¾ä¸ªä¾‹å­:</p><p>å½“æˆ‘ä»¬ä» é¦–é¡µ â€“&gt; åˆ—è¡¨é¡µ â€“&gt; å•†è¯¦é¡µ â€“&gt; å†è¿”å›ï¼Œè¿™æ—¶å€™åˆ—è¡¨é¡µåº”è¯¥æ˜¯éœ€è¦keep-alive</p><p>ä» é¦–é¡µ â€“&gt; åˆ—è¡¨é¡µ â€“&gt; å•†è¯¦é¡µ â€“&gt; è¿”å›åˆ°åˆ—è¡¨é¡µ(éœ€è¦ç¼“å­˜) â€“&gt; è¿”å›åˆ°é¦–é¡µ(éœ€è¦ç¼“å­˜) â€“&gt; å†æ¬¡è¿›å…¥åˆ—è¡¨é¡µ(ä¸éœ€è¦ç¼“å­˜)ï¼Œè¿™æ—¶å€™å¯ä»¥æŒ‰éœ€æ¥æ§åˆ¶é¡µé¢çš„keep-alive</p><p>åœ¨è·¯ç”±ä¸­è®¾ç½®keepAliveå±æ€§åˆ¤æ–­æ˜¯å¦éœ€è¦ç¼“å­˜</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  path<span class="punctuation">:</span> &#x27;list&#x27;<span class="punctuation">,</span></span><br><span class="line">  name<span class="punctuation">:</span> &#x27;itemList&#x27;<span class="punctuation">,</span> <span class="comment">// åˆ—è¡¨é¡µ</span></span><br><span class="line">  component (resolve) <span class="punctuation">&#123;</span></span><br><span class="line">    require(<span class="punctuation">[</span>&#x27;@/pages/item/list&#x27;<span class="punctuation">]</span><span class="punctuation">,</span> resolve)</span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"> meta<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  keepAlive<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  title<span class="punctuation">:</span> &#x27;åˆ—è¡¨é¡µ&#x27;</span><br><span class="line"> <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">class</span>=<span class="string">&#x27;wrapper&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- éœ€è¦ç¼“å­˜çš„è§†å›¾ç»„ä»¶ --&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-if</span>=<span class="string">&quot;$route.meta.keepAlive&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- ä¸éœ€è¦ç¼“å­˜çš„è§†å›¾ç»„ä»¶ --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">router-view</span> <span class="attr">v-if</span>=<span class="string">&quot;!$route.meta.keepAlive&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h1><p><strong>æ ¸å¿ƒæ€è·¯ï¼š</strong></p><p>1.keepaliveç»„ä»¶ç»´æŠ¤ä¸€ä¸ªcacheå¯¹è±¡å’Œkeysæ•°ç»„ï¼Œcacheå¯¹è±¡çš„keyæ˜¯ç¼“å­˜çš„ç»„ä»¶çš„nameï¼Œvalueæ˜¯ç¼“å­˜çš„ç»„ä»¶çš„vnodeã€‚keysæ•°ç»„å­˜æ”¾çš„æ˜¯æ‰€æœ‰å·²ç¼“å­˜ç»„ä»¶çš„nameå’Œcacheçš„keyä¸€ä¸€å¯¹åº”ã€‚</p><p>2.keepaliveç»„ä»¶åœ¨æŒ‚è½½çš„æ—¶å€™ä¼šç›‘å¬includeå’Œexcludeå±æ€§ï¼Œè‹¥æœ‰å˜åŒ–åˆ™è¯´æ˜ç¼“å­˜è§„åˆ™å‘ç”Ÿå˜åŒ–ï¼Œåˆ™æ‰§è¡ŒpruneCacheæ–¹æ³•æ›´æ–°cacheå¯¹è±¡å’Œkeysæ•°ç»„ã€‚pruneCacheæ–¹æ³•ä¼šå–å‡ºcacheå¯¹è±¡çš„æ¯ä¸€ä¸ªç¼“å­˜ç»„ä»¶çš„nameå€¼ï¼Œå¹¶ä¸ç¼“å­˜è§„åˆ™ç›¸æ¯”è¾ƒï¼Œè‹¥ç¬¦åˆåˆ™ä¿ç•™ï¼Œè‹¥ä¸ç¬¦åˆï¼Œåˆ™ä»cacheå’Œkeysä¸­åˆ æ‰ã€‚</p><p>3.keepaliveç»„ä»¶åœ¨é”€æ¯çš„æ—¶å€™ä¼šéå†cacheå¯¹è±¡ï¼Œå°†å¤„äºæœªæ¸²æŸ“çŠ¶æ€çš„ç»„ä»¶é”€æ¯ï¼Œå¹¶ä»cacheå’Œkeysä¸­åˆ é™¤ã€‚</p><p>4.ç¼“å­˜åŠŸèƒ½æ˜¯åœ¨<code>render</code>å‡½æ•°ä¸­å®ç°ï¼Œé¦–å…ˆè·å–keep-aliveç»„ä»¶ä¸­çš„å­ç»„ä»¶çš„<code>key</code>å€¼ï¼Œç„¶ååˆ¤æ–­éœ€ä¸éœ€è¦ç¼“å­˜ï¼Œè‹¥éœ€è¦ç¼“å­˜ï¼Œæ‹¿åˆ°<code>key</code>å€¼åå»<code>this.cache</code>å¯¹è±¡ä¸­å»å¯»æ‰¾æ˜¯å¦æœ‰è¯¥å€¼ï¼Œå¦‚æœæœ‰åˆ™è¡¨ç¤ºè¯¥ç»„ä»¶æœ‰ç¼“å­˜ï¼Œå³å‘½ä¸­ç¼“å­˜ï¼Œè¿”å›å¯¹åº”çš„vnodeã€‚è‹¥ç»„ä»¶è¿˜æ²¡æœ‰è¢«ç¼“å­˜è¿‡ï¼Œåˆ™ä»¥è¯¥ç»„ä»¶çš„<code>key</code>ä¸ºé”®ï¼Œç»„ä»¶<code>vnode</code>ä¸ºå€¼ï¼Œå°†å…¶å­˜å…¥<code>this.cache</code>ä¸­ï¼Œå¹¶ä¸”æŠŠ<code>key</code>å­˜å…¥<code>this.keys</code>ä¸­ã€‚æ­¤æ—¶å†åˆ¤æ–­<code>this.keys</code>ä¸­ç¼“å­˜ç»„ä»¶çš„æ•°é‡æ˜¯å¦è¶…è¿‡äº†è®¾ç½®çš„æœ€å¤§ç¼“å­˜æ•°é‡å€¼<code>this.max</code>ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œåˆ™æŠŠç¬¬ä¸€ä¸ªç¼“å­˜ç»„ä»¶åˆ æ‰ã€‚</p><p><code>keep-alive</code>æ˜¯<code>vue</code>ä¸­å†…ç½®çš„ä¸€ä¸ªç»„ä»¶</p><p>æºç ä½ç½®ï¼š<code>src/core/components/keep-alive.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;keep-alive&#x27;</span>,</span><br><span class="line">  <span class="attr">abstract</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">include</span>: [<span class="title class_">String</span>, <span class="title class_">RegExp</span>, <span class="title class_">Array</span>],</span><br><span class="line">    <span class="attr">exclude</span>: [<span class="title class_">String</span>, <span class="title class_">RegExp</span>, <span class="title class_">Array</span>],</span><br><span class="line">    <span class="attr">max</span>: [<span class="title class_">String</span>, <span class="title class_">Number</span>]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">created</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">keys</span> = []</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">destroyed</span> () &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">cache</span>) &#123;</span><br><span class="line">      <span class="title function_">pruneCacheEntry</span>(<span class="variable language_">this</span>.<span class="property">cache</span>, key, <span class="variable language_">this</span>.<span class="property">keys</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">mounted</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$watch(<span class="string">&#x27;include&#x27;</span>, <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">pruneCache</span>(<span class="variable language_">this</span>, <span class="function"><span class="params">name</span> =&gt;</span> <span class="title function_">matches</span>(val, name))</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.$watch(<span class="string">&#x27;exclude&#x27;</span>, <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">pruneCache</span>(<span class="variable language_">this</span>, <span class="function"><span class="params">name</span> =&gt;</span> !<span class="title function_">matches</span>(val, name))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">/* è·å–é»˜è®¤æ’æ§½ä¸­çš„ç¬¬ä¸€ä¸ªç»„ä»¶èŠ‚ç‚¹ */</span></span><br><span class="line">    <span class="keyword">const</span> slot = <span class="variable language_">this</span>.<span class="property">$slots</span>.<span class="property">default</span></span><br><span class="line">    <span class="keyword">const</span> vnode = <span class="title function_">getFirstComponentChild</span>(slot)</span><br><span class="line">    <span class="comment">/* è·å–è¯¥ç»„ä»¶èŠ‚ç‚¹çš„componentOptions */</span></span><br><span class="line">    <span class="keyword">const</span> componentOptions = vnode &amp;&amp; vnode.<span class="property">componentOptions</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (componentOptions) &#123;</span><br><span class="line">      <span class="comment">/* è·å–è¯¥ç»„ä»¶èŠ‚ç‚¹çš„åç§°ï¼Œä¼˜å…ˆè·å–ç»„ä»¶çš„nameå­—æ®µï¼Œå¦‚æœnameä¸å­˜åœ¨åˆ™è·å–ç»„ä»¶çš„tag */</span></span><br><span class="line">      <span class="keyword">const</span> name = <span class="title function_">getComponentName</span>(componentOptions)</span><br><span class="line">      <span class="keyword">const</span> &#123; include, exclude &#125; = <span class="variable language_">this</span></span><br><span class="line">      <span class="comment">/* å¦‚æœnameä¸åœ¨inlcudeä¸­æˆ–è€…å­˜åœ¨äºexludeä¸­åˆ™è¡¨ç¤ºä¸ç¼“å­˜ï¼Œç›´æ¥è¿”å›vnode */</span></span><br><span class="line">      <span class="keyword">if</span> ((include &amp;&amp; (!name || !<span class="title function_">matches</span>(include, name))) ||(exclude &amp;&amp; name &amp;&amp; <span class="title function_">matches</span>(exclude, name))) &#123;</span><br><span class="line">        <span class="keyword">return</span> vnode</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> &#123; cache, keys &#125; = <span class="variable language_">this</span></span><br><span class="line">      <span class="comment">/* è·å–ç»„ä»¶çš„keyå€¼ */</span></span><br><span class="line">      <span class="keyword">const</span> key = vnode.<span class="property">key</span> == <span class="literal">null</span></span><br><span class="line">        ? componentOptions.<span class="property">Ctor</span>.<span class="property">cid</span> + (componentOptions.<span class="property">tag</span> ? <span class="string">`::<span class="subst">$&#123;componentOptions.tag&#125;</span>`</span> : <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        : vnode.<span class="property">key</span></span><br><span class="line">      <span class="comment">/* æ‹¿åˆ°keyå€¼åå»this.cacheå¯¹è±¡ä¸­å»å¯»æ‰¾æ˜¯å¦æœ‰è¯¥å€¼ï¼Œå¦‚æœæœ‰åˆ™è¡¨ç¤ºè¯¥ç»„ä»¶æœ‰ç¼“å­˜ï¼Œå³å‘½ä¸­ç¼“å­˜ */</span></span><br><span class="line">      <span class="keyword">if</span> (cache[key]) &#123;</span><br><span class="line">        vnode.<span class="property">componentInstance</span> = cache[key].<span class="property">componentInstance</span></span><br><span class="line">        <span class="title function_">remove</span>(keys, key)</span><br><span class="line">        keys.<span class="title function_">push</span>(key)</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="comment">/* å¦‚æœæ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œåˆ™å°†å…¶è®¾ç½®è¿›ç¼“å­˜ */</span></span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">        cache[key] = vnode</span><br><span class="line">        keys.<span class="title function_">push</span>(key)</span><br><span class="line">        <span class="comment">/* å¦‚æœé…ç½®äº†maxå¹¶ä¸”ç¼“å­˜çš„é•¿åº¦è¶…è¿‡äº†this.maxï¼Œåˆ™ä»ç¼“å­˜ä¸­åˆ é™¤ç¬¬ä¸€ä¸ª */</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">max</span> &amp;&amp; keys.<span class="property">length</span> &gt; <span class="built_in">parseInt</span>(<span class="variable language_">this</span>.<span class="property">max</span>)) &#123;</span><br><span class="line">          <span class="title function_">pruneCacheEntry</span>(cache, keys[<span class="number">0</span>], keys, <span class="variable language_">this</span>.<span class="property">_vnode</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      vnode.<span class="property">data</span>.<span class="property">keepAlive</span> = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vnode || (slot &amp;&amp; slot[<span class="number">0</span>])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>this.cache</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å­˜å‚¨éœ€è¦ç¼“å­˜çš„ç»„ä»¶ï¼Œå®ƒå°†ä»¥å¦‚ä¸‹å½¢å¼å­˜å‚¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">cache</span> = &#123;</span><br><span class="line">    <span class="string">&#x27;key1&#x27;</span>:<span class="string">&#x27;ç»„ä»¶1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key2&#x27;</span>:<span class="string">&#x27;ç»„ä»¶2&#x27;</span>,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™æ‰§è¡Œ<code>pruneCacheEntry</code>å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pruneCacheEntry</span>(<span class="params">cache: VNodeCache, key: string, keys: <span class="built_in">Array</span>&lt;string&gt;, current?: VNode</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> cached = <span class="variable language_">this</span>.<span class="property">cache</span>[key]</span><br><span class="line">  <span class="comment">/*åˆ¤æ–­å½“å‰æ²¡æœ‰å¤„äºè¢«æ¸²æŸ“çŠ¶æ€çš„ç»„ä»¶ï¼Œå°†å…¶é”€æ¯*/</span></span><br><span class="line">  <span class="keyword">if</span> (cached &amp;&amp; (!current || cached.<span class="property">tag</span> !== current.<span class="property">tag</span>)) &#123;</span><br><span class="line">    cached.<span class="property">componentInstance</span>.$destroy()</span><br><span class="line">  &#125;</span><br><span class="line">  cache[key] = <span class="literal">null</span></span><br><span class="line">  <span class="title function_">remove</span>(keys, key)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>mounted</code>é’©å­å‡½æ•°ä¸­è§‚æµ‹ <code>include</code> å’Œ <code>exclude</code> çš„å˜åŒ–ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><s‘½ä¸­ç¼“å­˜ï¼Œè¿”å›å¯¹åº”çš„vnodeã€‚è‹¥ç»„ä»¶è¿˜æ²¡æœ‰è¢«ç¼“å­˜è¿‡ï¼Œåˆ™ä»¥è¯¥ç»„ä»¶çš„<code>key</code>ä¸ºé”®ï¼Œç»„ä»¶<code>vnode</code>ä¸ºå€¼ï¼Œå°†å…¶å­˜å…¥<code>this.cache</code>ä¸­ï¼Œå¹¶ä¸”æŠŠ<code>key</code>å­˜å…¥<code>this.keys</code>ä¸­ã€‚æ­¤æ—¶å†åˆ¤æ–­<code>this.keys</code>ä¸­ç¼“å­˜ç»„ä»¶çš„æ•°é‡æ˜¯å¦è¶…è¿‡äº†è®¾ç½®çš„æœ€å¤§ç¼“å­˜æ•°é‡å€¼<code>this.max</code>ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œåˆ™æŠŠç¬¬ä¸€ä¸ªç¼“å­˜ç»„ä»¶åˆ æ‰ã€‚</p><p><code>keep-alive</code>æ˜¯<code>vue</code>ä¸­å†…ç½®çš„ä¸€ä¸ªç»„ä»¶</p><p>æºç ä½ç½®ï¼š<code>src/core/components/keep-alive.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;keep-alive&#x27;</span>,</span><br><span class="line">  <span class="attr">abstract</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">include</span>: [<span class="title class_">String</span>, <span class="title class_">RegExp</span>, <span class="title class_">Array</span>],</span><br><span class="line">    <span class="attr">exclude</span>: [<span class="title class_">String</span>, <span class="title class_">RegExp</span>, <span class="title class_">Array</span>],</span><br><span class="line">    <span class="attr">max</span>: [<span class="title class_">String</span>, <span class="title class_">Number</span>]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">created</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">keys</span> = []</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">destroyed</span> () &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">cache</span>) &#123;</span><br><span class="line">      <span class="title function_">pruneCacheEntry</span>(<span class="variable language_">this</span>.<span class="property">cache</span>, key, <span class="variable language_">this</span>.<span class="property">keys</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">mounted</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$watch(<span class="string">&#x27;include&#x27;</span>, <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">pruneCache</span>(<span class="variable language_">this</span>, <span class="function"><span class="params">name</span> =&gt;</span> <span class="title function_">matches</span>(val, name))</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.$watch(<span class="string">&#x27;exclude&#x27;</span>, <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">pruneCache</span>(<span class="variable language_">this</span>, <span class="function"><span class="params">name</span> =&gt;</span> !<span class="title function_">matches</span>(val, name))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">/* è·å–é»˜è®¤æ’æ§½ä¸­çš„ç¬¬ä¸€ä¸ªç»„ä»¶èŠ‚ç‚¹ */</span></span><br><span class="line">    <span class="keyword">const</span> slot = <span class="variable language_">this</span>.<span class="property">$slots</span>.<span class="property">default</span></span><br><span class="line">    <span class="keyword">const</span> vnode = <span class="title function_">getFirstComponentChild</span>(slot)</span><br><span class="line">    <span class="comment">/* è·å–è¯¥ç»„ä»¶èŠ‚ç‚¹çš„componentOptions */</span></span><br><span class="line">    <span class="keyword">const</span> componentOptions = vnode &amp;&amp; vnode.<span class="property">componentOptions</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (componentOptions) &#123;</span><br><span class="line">      <span class="comment">/* è·å–è¯¥ç»„ä»¶èŠ‚ç‚¹çš„åç§°ï¼Œä¼˜å…ˆè·å–ç»„ä»¶çš„nameå­—æ®µï¼Œå¦‚æœnameä¸å­˜åœ¨åˆ™è·å–ç»„ä»¶çš„tag */</span></span><br><span class="line">      <span class="keyword">const</span> name = <span class="title function_">getComponentName</span>(componentOptions)</span><br><span class="line">      <span class="keyword">const</span> &#123; include, exclude &#125; = <span class="variable language_">this</span></span><br><span class="line">      <span class="comment">/* å¦‚æœnameä¸åœ¨inlcudeä¸­æˆ–è€…å­˜åœ¨äºexludeä¸­åˆ™è¡¨ç¤ºä¸ç¼“å­˜ï¼Œç›´æ¥è¿”å›vnode */</span></span><br><span class="line">      <span class="keyword">if</span> ((include &amp;&amp; (!name || !<span class="title function_">matches</span>(include, name))) ||(exclude &amp;&amp; name &amp;&amp; <span class="title function_">matches</span>(exclude, name))) &#123;</span><br><span class="line">        <span class="keyword">return</span> vnode</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> &#123; cache, keys &#125; = <span class="variable language_">this</span></span><br><span class="line">      <span class="comment">/* è·å–ç»„ä»¶çš„keyå€¼ */</span></span><br><span class="line">      <span class="keyword">const</span> key = vnode.<span class="property">key</span> == <span class="literal">null</span></span><br><span class="line">        ? componentOptions.<span class="property">Ctor</span>.<span class="property">cid</span> + (componentOptions.<span class="property">tag</span> ? <span class="string">`::<span class="subst">$&#123;componentOptions.tag&#125;</span>`</span> : <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        : vnode.<span class="property">key</span></span><br><span class="line">      <span class="comment">/* æ‹¿åˆ°keyå€¼åå»this.cacheå¯¹è±¡ä¸­å»å¯»æ‰¾æ˜¯å¦æœ‰è¯¥å€¼ï¼Œå¦‚æœæœ‰åˆ™è¡¨ç¤ºè¯¥ç»„ä»¶æœ‰ç¼“å­˜ï¼Œå³å‘½ä¸­ç¼“å­˜ */</span></span><br><span class="line">      <span class="keyword">if</span> (cache[key]) &#123;</span><br><span class="line">        vnode.<span class="property">componentInstance</span> = cache[key].<span class="property">componentInstance</span></span><br><span class="line">        <span class="title function_">remove</span>(keys, key)</span><br><span class="line">        keys.<span class="title function_">push</span>(key)</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="comment">/* å¦‚æœæ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œåˆ™å°†å…¶è®¾ç½®è¿›ç¼“å­˜ */</span></span><br><span class="line">       <span class="keyword">else</span> &#123;</span><br><span class="line">        cache[key] = vnode</span><br><span class="line">        keys.<span class="title function_">push</span>(key)</span><br><span class="line">        <span class="comment">/* å¦‚æœé…ç½®äº†maxå¹¶ä¸”ç¼“å­˜çš„é•¿åº¦è¶…è¿‡äº†this.maxï¼Œåˆ™ä»ç¼“å­˜ä¸­åˆ é™¤ç¬¬ä¸€ä¸ª */</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">max</span> &amp;&amp; keys.<span class="property">length</span> &gt; <span class="built_in">parseInt</span>(<span class="variable language_">this</span>.<span class="property">max</span>)) &#123;</span><br><span class="line">          <span class="title function_">pruneCacheEntry</span>(cache, keys[<span class="number">0</span>], keys, <span class="variable language_">this</span>.<span class="property">_vnode</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      vnode.<span class="property">data</span>.<span class="property">keepAlive</span> = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> vnode || (slot &amp;&amp; slot[<span class="number">0</span>])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>this.cache</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å­˜å‚¨éœ€è¦ç¼“å­˜çš„ç»„ä»¶ï¼Œå®ƒå°†ä»¥å¦‚ä¸‹å½¢å¼å­˜å‚¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">cache</span> = &#123;</span><br><span class="line">    <span class="string">&#x27;key1&#x27;</span>:<span class="string">&#x27;ç»„ä»¶1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key2&#x27;</span>:<span class="string">&#x27;ç»„ä»¶2&#x27;</span>,</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™æ‰§è¡Œ<code>pruneCacheEntry</code>å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pruneCacheEntry</span>(<span class="params">cache: VNodeCache, key: string, keys: <span class="built_in">Array</span>&lt;string&gt;, current?: VNode</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> cached = <span class="variable language_">this</span>.<span class="property">cache</span>[key]</span><br><span class="line">  <span class="comment">/*åˆ¤æ–­å½“å‰æ²¡æœ‰å¤„äºè¢«æ¸²æŸ“çŠ¶æ€çš„ç»„ä»¶ï¼Œå°†å…¶é”€æ¯*/</span></span><br><span class="line">  <span class="keyword">if</span> (cached &amp;&amp; (!current || cached.<span class="property">tag</span> !== current.<span class="property">tag</span>)) &#123;</span><br><span class="line">    cached.<span class="property">componentInstance</span>.$destroy()</span><br><span class="line">  &#125;</span><br><span class="line">  cache[key] = <span class="literal">null</span></span><br><span class="line">  <span class="title function_">remove</span>(keys, key)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>mounted</code>é’©å­å‡½æ•°ä¸­è§‚æµ‹ <code>include</code> å’Œ <code>exclude</code> çš„å˜åŒ–ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$watch(<span class="string">&#x27;include&#x27;</span>, <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">pruneCache</span>(<span class="variable language_">this</span>, <span class="function"><span class="params">name</span> =&gt;</span> <span class="title function_">matches</span>(val, name))</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">this</span>.$watch(<span class="string">&#x27;exclude&#x27;</span>, <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">pruneCache</span>(<span class="variable language_">this</span>, <span class="function"><span class="params">name</span> =&gt;</span> !<span class="title function_">matches</span>(val, name))</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœ <code>include</code> æˆ– <code>exclude</code> å‘ç”Ÿäº†å˜åŒ–ï¼Œå³è¡¨ç¤ºå®šä¹‰éœ€è¦ç¼“å­˜çš„ç»„ä»¶çš„è§„åˆ™æˆ–è€…ä¸éœ€è¦ç¼“å­˜çš„ç»„ä»¶çš„è§„åˆ™å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œ<code>pruneCache</code>å‡½æ•°ï¼Œå‡½æ•°å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">pruneCache</span> (<span class="params">keepAliveInstance, filter</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; cache, keys, _vnode &#125; = keepAliveInstance</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> cache) &#123;</span><br><span class="line">    <span class="keyword">const</span> cachedNode = cache[key]</span><br><span class="line">    <span class="keyword">if</span> (cachedNode) &#123;</span><br><span class="line">      <span class="keyword">const</span> name = <span class="title function_">getComponentName</span>(cachedNode.<span class="property">componentOptions</span>)</span><br><span class="line">      <span class="keyword">if</span> (name &amp;&amp; !<span class="title function_">filter</span>(name)) &#123;</span><br><span class="line">        <span class="title function_">pruneCacheEntry</span>(cache, key, keys, _vnode)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¯¥å‡½æ•°å†…å¯¹<code>this.cache</code>å¯¹è±¡è¿›è¡Œéå†ï¼Œå–å‡ºæ¯ä¸€é¡¹çš„<code>name</code>å€¼ï¼Œç”¨å…¶ä¸æ–°çš„ç¼“å­˜è§„åˆ™è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…ä¸ä¸Šï¼Œåˆ™è¡¨ç¤ºåœ¨æ–°çš„ç¼“å­˜è§„åˆ™ä¸‹è¯¥ç»„ä»¶å·²ç»ä¸éœ€è¦è¢«ç¼“å­˜ï¼Œåˆ™è°ƒç”¨<code>pruneCacheEntry</code>å‡½æ•°å°†å…¶ä»<code>this.cache</code>å¯¹è±¡å‰”é™¤å³å¯</p><p><code>keep-alive</code>çš„æœ€å¼ºå¤§ç¼“å­˜åŠŸèƒ½æ˜¯åœ¨<code>render</code>å‡½æ•°ä¸­å®ç°ã€‚é¦–å…ˆè·å–ç»„ä»¶çš„<code>key</code>å€¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> key = vnode.<span class="property">key</span> == <span class="literal">null</span>? componentOptions.<span class="property">Ctor</span>.<span class="property">cid</span> + (componentOptions.<span class="property">tag</span> ? <span class="string">`::<span class="subst">$&#123;componentOptions.tag&#125;</span>`</span> : <span class="string">&#x27;&#x27;</span>) : vnode.<span class="property">key</span></span><br></pre></td></tr></table></figure><p>æ‹¿åˆ°<code>key</code>å€¼åå»<code>this.cache</code>å¯¹è±¡ä¸­å»å¯»æ‰¾æ˜¯å¦æœ‰è¯¥å€¼ï¼Œå¦‚æœæœ‰åˆ™è¡¨ç¤ºè¯¥ç»„ä»¶æœ‰ç¼“å­˜ï¼Œå³å‘½ä¸­ç¼“å­˜ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å¦‚æœå‘½ä¸­ç¼“å­˜ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ vnode çš„ç»„ä»¶å®ä¾‹ */</span></span><br><span class="line"><span class="keyword">if</span> (cache[key]) &#123;</span><br><span class="line">    vnode.<span class="property">componentInstance</span> = cache[key].<span class="property">componentInstance</span></span><br><span class="line">    <span class="comment">/* è°ƒæ•´è¯¥ç»„ä»¶keyçš„é¡ºåºï¼Œå°†å…¶ä»åŸæ¥çš„åœ°æ–¹åˆ æ‰å¹¶é‡æ–°æ”¾åœ¨æœ€åä¸€ä¸ª */</span></span><br><span class="line">    <span class="title function_">remove</span>(keys, key)</span><br><span class="line">    keys.<span class="title function_">push</span>(key)</span><br><span class="line">&#125; <span class="comment">/* å¦‚æœæ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œåˆ™å°†å…¶è®¾ç½®è¿›ç¼“å­˜ */</span></span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    cache[key] = vnode</span><br><span class="line">    keys.<span class="title function_">push</span>(key)</span><br><span class="line">    <span class="comment">/* å¦‚æœé…ç½®äº†maxå¹¶ä¸”ç¼“å­˜çš„é•¿åº¦è¶…è¿‡äº†this.maxï¼Œåˆ™ä»ç¼“å­˜ä¸­åˆ é™¤ç¬¬ä¸€ä¸ª */</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">max</span> &amp;&amp; keys.<span class="property">length</span> &gt; <span class="built_in">parseInt</span>(<span class="variable language_">this</span>.<span class="property">max</span>)) &#123;</span><br><span class="line">        <span class="title function_">pruneCacheEntry</span>(cache, keys[<span class="number">0</span>], keys, <span class="variable language_">this</span>.<span class="property">_vnode</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‹¥ç»„ä»¶è¿˜æ²¡æœ‰è¢«ç¼“å­˜è¿‡ï¼Œåˆ™ä»¥è¯¥ç»„ä»¶çš„<code>key</code>ä¸ºé”®ï¼Œç»„ä»¶<code>vnode</code>ä¸ºå€¼ï¼Œå°†å…¶å­˜å…¥<code>this.cache</code>ä¸­ï¼Œå¹¶ä¸”æŠŠ<code>key</code>å­˜å…¥<code>this.keys</code>ä¸­ã€‚æ­¤æ—¶å†åˆ¤æ–­<code>this.keys</code>ä¸­ç¼“å­˜ç»„ä»¶çš„æ•°é‡æ˜¯å¦è¶…è¿‡äº†è®¾ç½®çš„æœ€å¤§ç¼“å­˜æ•°é‡å€¼<code>this.max</code>ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œåˆ™æŠŠç¬¬ä¸€ä¸ªç¼“å­˜ç»„ä»¶åˆ æ‰</p>]]></content>
      
      
      <categories>
          
          <category> Vue2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS-äº‹ä»¶æœºåˆ¶</title>
      <link href="/2024/12/25/JS-%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/"/>
      <url>/2024/12/25/JS-%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h1><p>JavaScriptå’Œhtmlä¹‹é—´çš„äº¤äº’æ˜¯é€šè¿‡äº‹ä»¶å®ç°çš„ã€‚äº‹ä»¶å°±æ˜¯ç”¨æˆ·æˆ–è€…æµè§ˆå™¨è‡ªèº«æ‰§è¡Œçš„æŸç§åŠ¨ä½œã€‚å“åº”æŸä¸ªäº‹ä»¶çš„å‡½æ•°å°±å«åšäº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p><h1 id="äº‹ä»¶å¯¹è±¡"><a href="#äº‹ä»¶å¯¹è±¡" class="headerlink" title="äº‹ä»¶å¯¹è±¡"></a>äº‹ä»¶å¯¹è±¡</h1><p>å½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œæµè§ˆå™¨ä¼šåˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†ä¸äº‹ä»¶ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚äº‹ä»¶çš„ç±»å‹ï¼Œäº‹ä»¶å‘ç”Ÿçš„ä½ç½®ç­‰ã€‚äº‹ä»¶å¯¹è±¡ä¼šåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ä½œä¸ºå‚æ•°ä¼ é€’ã€‚<br>å¸¸è§çš„å±æ€§</p><ul><li>event.targetï¼šäº‹ä»¶æºï¼Œå³è§¦å‘äº‹ä»¶çš„å…ƒç´ ã€‚</li><li>event.typeï¼šäº‹ä»¶ç±»å‹ï¼ˆä¾‹å¦‚ â€œclickâ€, â€œkeydownâ€ ç­‰ï¼‰ã€‚</li><li>event.preventDefault()ï¼šé˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼ˆä¾‹å¦‚ï¼Œé˜»æ­¢è¡¨å•æäº¤ã€é“¾æ¥è·³è½¬ç­‰ï¼‰ã€‚</li><li>event.stopPropagation()ï¼šé˜»æ­¢äº‹ä»¶çš„å†’æ³¡ï¼Œé˜²æ­¢äº‹ä»¶ä¼ é€’åˆ°çˆ¶å…ƒç´ ã€‚</li></ul><h1 id="äº‹ä»¶ç»‘å®š"><a href="#äº‹ä»¶ç»‘å®š" class="headerlink" title="äº‹ä»¶ç»‘å®š"></a>äº‹ä»¶ç»‘å®š</h1><p><strong>å†…è”ç»‘å®šï¼š</strong>å†…è”ç»‘å®šå°±æ˜¯åœ¨DOMå…ƒç´ ä¸­ç›´æ¥ç»‘å®šäº‹ä»¶ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åœ¨HTMLä¸­ç›´æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼&#x27;)&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>jsç»‘å®šï¼š</strong>é€šè¿‡å¯¹è±¡.äº‹ä»¶çš„å½¢å¼ç»™å¯¹è±¡ç»‘å®šäº‹ä»¶ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;myButton&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">const</span> button = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myButton&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">   <span class="comment">// é€šè¿‡ JavaScript ç»‘å®šç‚¹å‡»äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">   button.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">     <span class="title function_">alert</span>(<span class="string">&#x27;æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">   &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>**äº‹ä»¶ç›‘å¬å™¨:**é€šè¿‡addEventListener()æ–¹æ³•ç»™å¯¹è±¡ç»‘å®šäº‹ä»¶ï¼Œæ˜¯æœ€æ¨èçš„äº‹ä»¶ç»‘å®šæ–¹æ³•ï¼Œå®ƒå¯ä»¥ä¸ºåŒä¸€ä¸ªäº‹ä»¶ç»‘å®šå¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¹¶ä¸”å¯é€šè¿‡removeEventListener()æ–¹æ³•ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åºã€‚æ”¯æŒäº‹ä»¶çš„æ•è·å’Œå†’æ³¡æœºåˆ¶ï¼Œæ›´çµæ´»ã€‚</p><h1 id="äº‹ä»¶å›è°ƒæœºåˆ¶"><a href="#äº‹ä»¶å›è°ƒæœºåˆ¶" class="headerlink" title="äº‹ä»¶å›è°ƒæœºåˆ¶"></a>äº‹ä»¶å›è°ƒæœºåˆ¶</h1><p>äº‹ä»¶å›è°ƒæœºåˆ¶æ˜¯jså’Œæµè§ˆå™¨äº¤äº’çš„æ ¸å¿ƒï¼Œé€šè¿‡addEventListenerç»‘å®šäº‹ä»¶ä¸å›è°ƒå‡½æ•°ï¼Œå½“äº‹ä»¶è§¦å‘æ—¶ï¼Œå›è°ƒå‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚</p><h2 id="äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶å†’æ³¡</h2><p>äº‹ä»¶å†’æ³¡æè¿°äº†æµè§ˆå™¨å¦‚ä½•å¤„ç†é’ˆå¯¹åµŒå¥—å…ƒç´ çš„äº‹ä»¶ã€‚äº‹ä»¶å¼€å§‹çš„æ—¶å€™ä»æœ€æ·±å±‚èŠ‚ç‚¹æ¥æ”¶ï¼Œä¹‹åæ²¿DOMæ ‘é€çº§å‘ä¸Šä¼ æ’­ï¼Œç›´è‡³documentå¯¹è±¡ã€‚</p><h2 id="äº‹ä»¶æ•è·"><a href="#äº‹ä»¶æ•è·" class="headerlink" title="äº‹ä»¶æ•è·"></a>äº‹ä»¶æ•è·</h2><p>äº‹ä»¶æ•è·å’Œäº‹ä»¶å†’æ³¡æ˜¯ç›¸åçš„ï¼Œäº‹ä»¶æ•è·æ˜¯ä»æœ€é¡¶å±‚èŠ‚ç‚¹å¼€å§‹æ¥æ”¶äº‹ä»¶ï¼Œç„¶åé€çº§å‘ä¸‹ä¼ æ’­ï¼Œç›´è‡³æœ€æ·±å±‚èŠ‚ç‚¹ã€‚</p><p>äº‹ä»¶çš„é»˜è®¤ä¼ æ’­é¡ºåºæ˜¯å…ˆé€šè¿‡æ•è·é˜¶æ®µä»é¡¶çº§çˆ¶å…ƒç´ å‘ä¸‹ä¼ æ’­ï¼Œåˆ°è¾¾ç›®æ ‡å…ƒç´ ä¹‹åé€šè¿‡å†’æ³¡é˜¶æ®µå‘ä¸Šä¼ æ’­ï¼Œåˆ°è¾¾é¡¶çº§çˆ¶å…ƒç´ ç»“æŸã€‚</p><p>å¯ä»¥é€šè¿‡addEventListener()æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ¥è®¾ç½®äº‹ä»¶å¤„ç†ç¨‹åºçš„æ‰§è¡Œæ—¶æœºï¼Œtrueè¡¨ç¤ºæ•è·é˜¶æ®µï¼Œfalseè¡¨ç¤ºå†’æ³¡é˜¶æ®µã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‹ä»¶æ•è·é˜¶æ®µ</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;parent&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ•è·é˜¶æ®µè§¦å‘&#x27;</span>);</span><br><span class="line">&#125;, <span class="literal">true</span>);  <span class="comment">// true è¡¨ç¤ºæ•è·é˜¶æ®µ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‹ä»¶å†’æ³¡é˜¶æ®µ</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;parent&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å†’æ³¡é˜¶æ®µè§¦å‘&#x27;</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);  <span class="comment">// false è¡¨ç¤ºå†’æ³¡é˜¶æ®µ</span></span><br></pre></td></tr></table></figure><h2 id="äº‹ä»¶å§”æ‰˜"><a href="#äº‹ä»¶å§”æ‰˜" class="headerlink" title="äº‹ä»¶å§”æ‰˜"></a>äº‹ä»¶å§”æ‰˜</h2><p><strong>å®šä¹‰ï¼š</strong>äº‹ä»¶å§”æ‰˜ä¹Ÿç§°ä¹‹ä¸ºäº‹ä»¶ä»£ç†ï¼Œæ˜¯JavaScriptä¸­å¸¸ç”¨ç»‘å®šäº‹ä»¶çš„å¸¸ç”¨æŠ€å·§ã€‚é¡¾åæ€ä¹‰ï¼Œâ€œäº‹ä»¶ä»£ç†â€å³æ˜¯æŠŠåŸæœ¬éœ€è¦ç»‘å®šåœ¨å­å…ƒç´ çš„å“åº”äº‹ä»¶å§”æ‰˜ç»™çˆ¶å…ƒç´ ï¼Œè®©çˆ¶å…ƒç´ æ‹…å½“äº‹ä»¶ç›‘å¬çš„èŒåŠ¡ã€‚äº‹ä»¶ä»£ç†çš„åŸç†æ˜¯DOMå…ƒç´ çš„äº‹ä»¶å†’æ³¡ã€‚</p><p><strong>åŸç†ï¼š</strong>äº‹ä»¶å§”æ‰˜åˆ©ç”¨äº‹ä»¶å†’æ³¡æœºåˆ¶æ¥æ•è·äº‹ä»¶ï¼Œè€Œä¸æ˜¯å°†äº‹ä»¶ç»‘å®šåˆ°æ¯ä¸ªå­å…ƒç´ ä¸Šã€‚æ¯”å¦‚å°†ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ç»‘å®šåˆ°çˆ¶å…ƒç´ ï¼Œå½“å­å…ƒç´ è¢«ç‚¹å‡»æ—¶ï¼Œäº‹ä»¶ä¼šå†’æ³¡åˆ°çˆ¶å…ƒç´ ï¼Œè¿™æ—¶çˆ¶å…ƒç´ çš„äº‹ä»¶ç›‘å¬å™¨å°±èƒ½æ•è·è¿™ä¸ªäº‹ä»¶ã€‚å¦‚æœç»™æ¯ä¸ªå­å…ƒç´ ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œå½“å­å…ƒç´ å¾ˆå¤šæ—¶ï¼Œæ€§èƒ½ä¼šä¸‹é™ã€‚è€Œäº‹ä»¶å§”æ‰˜åªéœ€è¦åœ¨çˆ¶å…ƒç´ ä¸Šç»‘å®šä¸€æ¬¡äº‹ä»¶ï¼Œå°±å¯ä»¥å¤„ç†æ‰€æœ‰å­å…ƒç´ çš„äº‹ä»¶ï¼Œæé«˜äº†æ€§èƒ½ã€‚äº‹ä»¶å§”æ‰˜é€šå¸¸ç”¨äºä¸ºè®¸å¤šç›¸ä¼¼çš„å…ƒç´ æ·»åŠ ç›¸åŒçš„å¤„ç†ï¼Œä½†ä¸ä»…é™äºæ­¤ã€‚ä¾‹å¦‚å¯ä»¥åœ¨çˆ¶å®¹å™¨å…ƒç´ ä¸Šç»‘å®šäº‹ä»¶ï¼Œä¹‹åæ‰¾åˆ°event.targetï¼Œäº‹ä»¶å‘ç”Ÿåœ¨æŒ‡å®šå…ƒç´ å†…å°±å¤„ç†è¯¥äº‹ä»¶ã€‚</p><p><strong>ä¸¾ä¾‹ï¼š</strong>ä¸€ä¸ªæœ‰9ä¸ªå•å…ƒæ ¼çš„tableè¡¨æ ¼ï¼Œç‚¹å‡»ä»»æ„å•å…ƒæ ¼ï¼Œéƒ½ä¼šè§¦å‘äº‹ä»¶ï¼Œå¹¶é«˜äº®æ˜¾ç¤ºè¯¥å•å…ƒæ ¼ã€‚ï¼ˆä¹Ÿå¯ä»¥æ˜¯99ä¸ªå•å…ƒæ ¼ï¼Œ999ä¸ªå•å…ƒæ ¼ç”šè‡³æ›´å¤šï¼‰ã€‚</p><p><strong>å®ç°ï¼š</strong>tableæ·»åŠ ç‚¹å‡»äº‹ä»¶å¹¶æ·»åŠ ç›‘å¬å™¨ï¼Œæ•è·æ‰€æœ‰çš„tdå»é™¤é«˜äº®ï¼Œä¹‹åä½¿ç”¨event.targetç»™ç‚¹å‡»çš„tdè®¾ç½®é«˜äº®ã€‚</p><h2 id="å¼‚æ­¥å›è°ƒæœºåˆ¶"><a href="#å¼‚æ­¥å›è°ƒæœºåˆ¶" class="headerlink" title="å¼‚æ­¥å›è°ƒæœºåˆ¶"></a>å¼‚æ­¥å›è°ƒæœºåˆ¶</h2><p>jsæ˜¯å•çº¿ç¨‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œäº‹ä»¶å›è°ƒæœºåˆ¶å’Œå¼‚æ­¥ç¼–ç¨‹ï¼ˆå¦‚setTimeoutã€Promiseã€async&#x2F;awaitï¼‰ç»“åˆç´§å¯†ã€‚äº‹ä»¶å›è°ƒé€šå¸¸æ˜¯åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­å¼‚æ­¥æ‰§è¡Œçš„ï¼Œè¿™æ„å‘³ç€ä»–ä»¬ä¼šåœ¨å½“å‰æ‰§è¡Œæ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•åæ‰ä¼šæ‰§è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¼€å§‹&#x27;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å›è°ƒå‡½æ•°æ‰§è¡Œ&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç»“æŸ&#x27;</span>);</span><br></pre></td></tr></table></figure><p>è¾“å‡ºé¡ºåº</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼€å§‹</span></span><br><span class="line"><span class="comment">//ç»“æŸ</span></span><br><span class="line"><span class="comment">//å›è°ƒå‡½æ•°æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="äº‹ä»¶å›è°ƒçš„æ‰§è¡Œé¡ºåº"><a href="#äº‹ä»¶å›è°ƒçš„æ‰§è¡Œé¡ºåº" class="headerlink" title="äº‹ä»¶å›è°ƒçš„æ‰§è¡Œé¡ºåº"></a>äº‹ä»¶å›è°ƒçš„æ‰§è¡Œé¡ºåº</h3><ol><li>äº‹ä»¶è§¦å‘å¹¶å°†å›è°ƒå‡½æ•°åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—</li><li>æ‰§è¡Œå½“å‰æ ˆä¸­çš„åŒæ­¥ä»£ç </li><li>åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­çš„å›è°ƒå‡½æ•°è¢«æ”¾å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº‹ä»¶æœºåˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>asyncä¸deferçš„åŒºåˆ«</title>
      <link href="/2024/12/25/JS-async%E4%B8%8Edefer/"/>
      <url>/2024/12/25/JS-async%E4%B8%8Edefer/</url>
      
        <content type="html"><![CDATA[<h1 id="1-æµè§ˆå™¨çš„è§£æå’Œæ¸²æŸ“è¿‡ç¨‹"><a href="#1-æµè§ˆå™¨çš„è§£æå’Œæ¸²æŸ“è¿‡ç¨‹" class="headerlink" title="1. æµè§ˆå™¨çš„è§£æå’Œæ¸²æŸ“è¿‡ç¨‹"></a>1. æµè§ˆå™¨çš„è§£æå’Œæ¸²æŸ“è¿‡ç¨‹</h1><p>æµè§ˆå™¨åœ¨åŠ è½½ç½‘é¡µæ—¶ï¼Œä¼šæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è§£æå’Œæ¸²æŸ“å†…å®¹ï¼š</p><ul><li><p>HTMLè§£æ: æµè§ˆå™¨ä»é¡¶éƒ¨å¼€å§‹é€è¡Œè§£æHTMLæ–‡ä»¶ï¼Œç”ŸæˆDOMæ ‘ï¼Œä»£è¡¨é¡µé¢çš„ç»“æ„ã€‚</p></li><li><p>CSSè§£æ: åŒæ—¶ï¼Œæµè§ˆå™¨ä¼šè§£æCSSæ–‡ä»¶å’Œå†…è”æ ·å¼ï¼Œç”ŸæˆCSSOMæ ‘ï¼Œä»£è¡¨é¡µé¢çš„æ ·å¼ã€‚</p></li><li><p>JavaScriptæ‰§è¡Œ: å½“è§£æå™¨é‡åˆ°scriptæ ‡ç­¾æ—¶ï¼Œé»˜è®¤ä¼šæš‚åœHTMLçš„è§£æå’Œæ¸²æŸ“ï¼Œå»æ‰§è¡Œè„šæœ¬ä¸­çš„JavaScriptä»£ç ã€‚</p></li><li><p>é¡µé¢æ¸²æŸ“: è§£æå®Œæ‰€æœ‰å†…å®¹å¹¶æ‰§è¡Œå®Œæ‰€æœ‰è„šæœ¬åï¼Œæµè§ˆå™¨æ ¹æ®DOMæ ‘å’ŒCSSOMæ ‘æ¸²æŸ“å‡ºé¡µé¢ã€‚</p></li></ul><h1 id="2-ä¸ºä»€ä¹ˆJavaScriptè„šæœ¬ä¼šé˜»å¡è§£æ"><a href="#2-ä¸ºä»€ä¹ˆJavaScriptè„šæœ¬ä¼šé˜»å¡è§£æ" class="headerlink" title="2.ä¸ºä»€ä¹ˆJavaScriptè„šæœ¬ä¼šé˜»å¡è§£æ"></a>2.ä¸ºä»€ä¹ˆJavaScriptè„šæœ¬ä¼šé˜»å¡è§£æ</h1><p>JavaScriptè„šæœ¬å¯èƒ½ä¼šæ“ä½œDOMæˆ–è€…æ”¹å˜é¡µé¢å†…å®¹ï¼Œæ¯”å¦‚æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€æ”¹å˜æ ·å¼ç­‰ã€‚ä¸ºäº†ç¡®ä¿è¿™äº›æ“ä½œçš„æ­£ç¡®æ€§ï¼Œæµè§ˆå™¨åœ¨é‡åˆ°scriptæ ‡ç­¾æ—¶ä¼šæš‚åœHTMLçš„è§£æã€‚è¿™æ ·å¯ä»¥ä¿è¯ï¼š</p><ul><li><p>é¡ºåºæ‰§è¡Œ: æµè§ˆå™¨ä¼šä¸¥æ ¼æŒ‰ç…§è„šæœ¬åœ¨HTMLä¸­çš„é¡ºåºæ¥æ‰§è¡ŒJavaScriptä»£ç ï¼Œç¡®ä¿è„šæœ¬é—´çš„ä¾èµ–å…³ç³»ã€‚</p></li><li><p>é¡µé¢ä¸€è‡´æ€§: åœ¨è„šæœ¬æ‰§è¡Œå®Œæˆä¹‹å‰æš‚åœè§£æå¯ä»¥é˜²æ­¢åœ¨HTMLæ–‡æ¡£è§£æçš„è¿‡ç¨‹ä¸­å‘ç”Ÿä¸ä¸€è‡´çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œå¦‚æœè„šæœ¬åœ¨è§£æè¿‡ç¨‹ä¸­æ’å…¥æ–°å…ƒç´ ï¼Œæš‚åœè§£æå¯ä»¥ç¡®ä¿è¿™äº›æ–°å…ƒç´ è¢«æ­£ç¡®å¤„ç†ã€‚</p></li></ul><h1 id="3-asyncå’Œdeferå±æ€§"><a href="#3-asyncå’Œdeferå±æ€§" class="headerlink" title="3.asyncå’Œdeferå±æ€§"></a>3.asyncå’Œdeferå±æ€§</h1><p>ä¸ºäº†ä¼˜åŒ–é¡µé¢åŠ è½½æ€§èƒ½ï¼ŒHTML5å¼•å…¥äº†<code>async</code>å’Œ<code>defer</code>å±æ€§ï¼Œç”¨äºæ§åˆ¶è„šæœ¬çš„åŠ è½½å’Œæ‰§è¡Œè¡Œä¸ºã€‚</p><h2 id="asyncå±æ€§"><a href="#asyncå±æ€§" class="headerlink" title="asyncå±æ€§"></a>asyncå±æ€§</h2><ul><li>åŠ è½½æ–¹å¼: ä½¿ç”¨asyncå±æ€§çš„è„šæœ¬æ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œè¿™æ„å‘³ç€è„šæœ¬ä¼šåœ¨åå°åŠ è½½ï¼Œä¸ä¼šé˜»å¡HTMLæ–‡æ¡£çš„è§£æã€‚</li><li>æ‰§è¡Œæ—¶æœº: ä¸€æ—¦è„šæœ¬åŠ è½½å®Œæˆï¼Œæµè§ˆå™¨ä¼šç«‹å³æ‰§è¡Œå®ƒï¼Œè¿™å¯èƒ½åœ¨HTMLæ–‡æ¡£çš„è§£æå®Œæˆä¹‹å‰ã€‚å› æ­¤ï¼Œasyncè„šæœ¬çš„æ‰§è¡Œé¡ºåºæ— æ³•ä¿è¯ï¼Œè„šæœ¬ä¹‹é—´ä¹Ÿä¸åº”æœ‰ä¾èµ–ã€‚</li><li>é€‚ç”¨åœºæ™¯: é€‚ç”¨äºç‹¬ç«‹çš„è„šæœ¬ï¼Œæ¯”å¦‚å¹¿å‘Šã€æ•°æ®ç»Ÿè®¡è„šæœ¬ï¼Œè¿™äº›è„šæœ¬ä¸ä¾èµ–äºå…¶ä»–å†…å®¹ï¼Œä¹Ÿä¸æ”¹å˜é¡µé¢ç»“æ„ã€‚</li></ul><h2 id="deferå±æ€§"><a href="#deferå±æ€§" class="headerlink" title="deferå±æ€§"></a>deferå±æ€§</h2><ul><li><p>åŠ è½½æ–¹å¼: ä½¿ç”¨deferå±æ€§çš„è„šæœ¬ä¹Ÿæ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œç±»ä¼¼äºasyncï¼Œå®ƒä»¬ä¸ä¼šé˜»å¡HTMLæ–‡æ¡£çš„è§£æã€‚</p></li><li><p>æ‰§è¡Œæ—¶æœº: ä¸asyncä¸åŒï¼Œdeferè„šæœ¬ä¼šåœ¨HTMLæ–‡æ¡£å®Œå…¨è§£æå®Œæ¯•åæŒ‰é¡ºåºæ‰§è¡Œã€‚è¿™æ„å‘³ç€å³ä½¿è„šæœ¬åŠ è½½å®Œæˆï¼Œå®ƒä»¬ä¹Ÿä¼šç­‰åˆ°æ–‡æ¡£è§£æç»“æŸæ‰æ‰§è¡Œã€‚</p></li><li><p>é€‚ç”¨åœºæ™¯: é€‚ç”¨äºéœ€è¦ç¡®ä¿è„šæœ¬é¡ºåºæˆ–ä¾èµ–äºæ•´ä¸ªæ–‡æ¡£çš„è„šæœ¬ã€‚deferè„šæœ¬é€šå¸¸ç”¨äºåˆå§‹åŒ–é¡µé¢çš„JavaScriptä»£ç ã€‚</p></li></ul><h1 id="4-asyncä¸deferçš„åŒºåˆ«"><a href="#4-asyncä¸deferçš„åŒºåˆ«" class="headerlink" title="4.asyncä¸deferçš„åŒºåˆ«"></a>4.asyncä¸deferçš„åŒºåˆ«</h1><table><thead><tr><th>ç‰¹æ€§</th><th>async</th><th>defer</th></tr></thead><tbody><tr><td>åŠ è½½æ–¹å¼</td><td>å¼‚æ­¥</td><td>å¼‚æ­¥</td></tr><tr><td>æ‰§è¡Œæ—¶æœº</td><td>åŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œ</td><td>HTMLè§£æå®ŒæˆåæŒ‰é¡ºåºæ‰§è¡Œ</td></tr><tr><td>æ‰§è¡Œé¡ºåº</td><td>ä¸ä¿è¯é¡ºåº</td><td>ä¿è¯é¡ºåº</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ç‹¬ç«‹è„šæœ¬</td><td>ä¾èµ–è„šæœ¬æˆ–åˆå§‹åŒ–è„šæœ¬</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> async </tag>
            
            <tag> defer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/12/18/hello-world/"/>
      <url>/2024/12/18/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
